<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="XenProductXenMods" title="Xen Product Manager - XenMods License Claim" version_string="1.0.3" version_id="1000300" url="https://xenresources.com" install_callback_class="XenProductXenMods_Install" install_callback_method="installer" uninstall_callback_class="XenProductXenMods_Install" uninstall_callback_method="uninstaller">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <admin_template_modifications/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="load_class_controller" execute_order="10" callback_class="XenProductXenMods_Listener" callback_method="extendProductController" active="1" hint="XenProduct_ControllerPublic_Product" description="Extends: XenProduct_ControllerPublic_Product"/>
    <listener event_id="load_class_controller" execute_order="10" callback_class="XenProductXenMods_Listener" callback_method="extendOptionalExtraController" active="1" hint="XenProduct_ControllerPublic_OptionalExtra" description="Extends: XenProduct_ControllerPublic_OptionalExtra"/>
    <listener event_id="load_class_datawriter" execute_order="10" callback_class="XenProductXenMods_Listener" callback_method="extendProductDataWriter" active="1" hint="XenProduct_DataWriter_Product" description="Extends: XenProduct_DataWriter_Product"/>
    <listener event_id="load_class_datawriter" execute_order="10" callback_class="XenProductXenMods_Listener" callback_method="extendOptionalExtraDataWriter" active="1" hint="XenProduct_DataWriter_OptionalExtra" description="Extends: XenProduct_DataWriter_OptionalExtra"/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <email_template_modifications/>
  <optiongroups>
    <option option_id="xenproductXenModsExtension" edit_format="spinbox" data_type="unsigned_integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params>min=0
step=1</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="XenProduct" display_order="510"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions/>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="option_xenproductXenModsExtension" version_id="1000070" version_string="1.0.0"><![CDATA[License Extension (days)]]></phrase>
    <phrase title="option_xenproductXenModsExtension_explain" version_id="1000070" version_string="1.0.0"><![CDATA[If you wish to grant a goodwill license extension when a license is claimed from XenMods, enter the number of days to extend by here.]]></phrase>
  </phrases>
  <route_prefixes/>
  <style_properties/>
  <templates>
    <template title="xenproduct_xenmods_claim" version_id="1000070" version_string="1.0.0"><![CDATA[<xen:title>{$product.product_title} - Claim License</xen:title>

<xen:navigation>
	<xen:breadcrumb href="{xen:link 'full:products', $product}">{$product.product_title}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link 'products/claim-xenmods-license', $product}" method="post" class="xenForm formOverlay AutoValidator" data-redirect="on">

	<dl class="ctrlUnit">
		<dt><label for="ctrl_order">Invoice / Order Key:</label></dt>
		<dd><input type="text" name="cart_key" value="" id="ctrl_cart_key" class="textCtrl" /></dd>
	</dl>

	<dl class="ctrlUnit">
		<dt><label for="ctrl_email">Email Address:</label></dt>
		<dd>
			<input type="email" name="email" value="{$visitor.email}" id="ctrl_email" class="textCtrl" />
			<p class="explain">Enter the correct email address which you are registered with at XenMods.</p>
		</dd>
	</dl>

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd><input type="submit" value="Claim License" accesskey="s" class="button primary" /></dd>
	</dl>

	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
	<input type="hidden" name="_xfConfirm" value="1" />
</form>]]></template>
    <template title="xenproduct_xenmods_optional_extra_edit" version_id="1000070" version_string="1.0.0"><![CDATA[<h2 class="sectionHeader">XenMods Options</h2>

<dl class="ctrlUnit">
	<dt>Allow claims from XenMods:</dt>
	<dd>
		<input type="text" class="textCtrl" name="xenmods_extra_id" value="{$optionalExtra.xenmods_extra_id}" />
		<p class="explain">Enter the optional extra ID here as it appears on the XenMods site.</p>
	</dd>
</dl>

<input type="hidden" name="xenmods_extra_id_shown" value="1" />]]></template>
    <template title="xenproduct_xenmods_product_edit" version_id="1000070" version_string="1.0.0"><![CDATA[<h2 class="sectionHeader">XenMods Options</h2>

<dl class="ctrlUnit">
	<dt>Allow claims from XenMods:</dt>
	<dd>
		<input type="text" class="textCtrl" name="xenmods_product_id" value="{$product.xenmods_product_id}" />
		<p class="explain">Enter the product ID here as it appears on the XenMods site.</p>
	</dd>
</dl>

<input type="hidden" name="xenmods_product_id_shown" value="1" />]]></template>
    <template title="xenproduct_xenmods_product_view_sidebar" version_id="1000070" version_string="1.0.0"><![CDATA[<xen:if is="{$product.xenmods_product_id}">
	<a class="callToAction OverlayTrigger" href="{xen:link 'products/claim-xenmods-license', $product}">
	<span>
		Claim License
		<small class="minorText">
			If you already own a license for this product, purchased at XenMods, you can claim it here.
		</small>
	</span>
	</a>
</xen:if>]]></template>
  </templates>
  <public_template_modifications>
    <modification template="xenproduct_optional_extra_edit" modification_key="XenProductXenMods_xenproduct_optional_extra_edit" description="Adds the ability to associate a optional extra with a XenMods optional extra ID" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<dl class="ctrlUnit submitUnit">]]></find>
      <replace><![CDATA[<xen:include template="xenproduct_xenmods_optional_extra_edit" />
$0]]></replace>
    </modification>
    <modification template="xenproduct_product_edit" modification_key="XenProductXenMods_xenproduct_product_edit" description="Adds the ability to associate a product with a XenMods product ID" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<dl class="ctrlUnit submitUnit">]]></find>
      <replace><![CDATA[<xen:include template="xenproduct_xenmods_product_edit" />
$0]]></replace>
    </modification>
    <modification template="xenproduct_product_view" modification_key="XenProductXenMods_xenproduct_product_view" description="" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<a class="callToAction AddToCart"]]></find>
      <replace><![CDATA[<xen:include template="xenproduct_xenmods_product_view_sidebar" />
$0]]></replace>
    </modification>
  </public_template_modifications>
  <bb_code_media_sites/>
  <bb_codes/>
</addon>
